#!/usr/bin/make -f

# NVIDIA switched to a flat layout in 256.xx, so create some directories and
# symlinks to have the files accessible in the old locations for compatibility
# with the legacy packages
restore-upstream-directory-structure:
	mkdir -p etc/OpenCL usr/X11R6 usr/share/man usr/src
	ln -s ../.. etc/OpenCL/vendors
	ln -s .. usr/bin
	ln -s .. usr/include
	ln -s . CL
	ln -s . GL
	ln -s . cuda
	ln -s .. usr/lib
	test ! -d vdpau || rmdir vdpau
	ln -s . vdpau
	ln -s ../.. usr/X11R6/lib
	ln -s . modules
	ln -s . drivers
	ln -s . extensions
	test ! -d 32 || ln -s ../32 usr/lib32
	test ! -d 32/vdpau || rmdir 32/vdpau
	test ! -d 32 || ln -s . 32/vdpau
	ln -s ../.. usr/share/doc
	ln -s ../../.. usr/share/man/man1
	ln -s ../../kernel usr/src/nv

